# Operating System Detection
OS="$(uname -s | tr '[:upper:]' '[:lower:]')"

if echo "$OS" | grep -q "mingw"; then
  # Windows (Git Bash)
  echo "ğŸ” Detected Windows (Git Bash). Running PowerShell script..."
  powershell.exe -ExecutionPolicy Bypass -NoProfile -File .husky/pre-push.ps1 "$1"
  bun run lint-staged
else
  # Linux/Mac
  echo "ğŸ” Detected Linux/Mac. Running shell script..."
  echo "ğŸ—ï¸ Run build before push..."
  bun run build || (echo "âŒ Build failed! Push aborted." && exit 1)
  echo "âœ… Build OK. Proceeding to push."
fi